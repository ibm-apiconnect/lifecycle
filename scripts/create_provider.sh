#!/bin/bash
./validate_prereqs.sh

MANAGEMENT=localhost:3003
PROVIDER_USER_REGISTRY=api-manager-lur
ADMIN_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwNzA4NGQ4Zi04ODI2LTQyZGYtYjJmYi00OTNhNjMyMmFmZWEiLCJuYW1lc3BhY2UiOiIyYWM3ODA5OS1iOGU3LTQ4ZmEtYWZkYS0xZGZmMTNiNzcwZWQ6NDQxNDI0NGItYTZkMi00MTg5LTgwMTctYWFmYWQ3MTVjNWJmOjg1NTdkMTViLTMxM2UtNGY3OS1iMDY3LTg4ZDJjZTU0ZTVkOCIsImF1ZCI6Ii9hcGkvY2xvdWQvcmVnaXN0cmF0aW9ucy9hMTZkNjA3ZC00OWJjLTRiZDAtOWIwZS1hZTk0MjIyNjgzMTYiLCJzdWIiOiIvYXBpL3VzZXItcmVnaXN0cmllcy8yYWM3ODA5OS1iOGU3LTQ4ZmEtYWZkYS0xZGZmMTNiNzcwZWQvNDQxNDI0NGItYTZkMi00MTg5LTgwMTctYWFmYWQ3MTVjNWJmL3VzZXJzLzg1NTdkMTViLTMxM2UtNGY3OS1iMDY3LTg4ZDJjZTU0ZTVkOCIsImlzcyI6IklCTSBBUEkgQ29ubmVjdCIsImV4cCI6MTU3NTQzOTc5NiwiaWF0IjoxNTc1NDEwOTk2LCJncmFudF90eXBlIjoicGFzc3dvcmQiLCJ1c2VyX3JlZ2lzdHJ5X3VybCI6Ii9hcGkvdXNlci1yZWdpc3RyaWVzLzJhYzc4MDk5LWI4ZTctNDhmYS1hZmRhLTFkZmYxM2I3NzBlZC80NDE0MjQ0Yi1hNmQyLTQxODktODAxNy1hYWZhZDcxNWM1YmYiLCJyZWFsbSI6ImFkbWluL2RlZmF1bHQtaWRwLTEiLCJ1c2VybmFtZSI6ImFkbWluIiwiaWRfdG9rZW4iOiJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKbWFYSnpkRjl1WVcxbElqb2lRMnh2ZFdRaUxDSnNZWE4wWDI1aGJXVWlPaUpQZDI1bGNpSXNJblZ6WlhKZmFXUWlPaUkzTVRBME4yWXhOQzFqT0RjeUxUUmhaVFF0WW1FeE15MHhZVGt3T1RkaU1qVXpZek1pTENKMWMyVnlibUZ0WlNJNkltRmtiV2x1SWl3aWFXRjBJam94TlRjMU5ERXdPVGsyZlEuYmNkZ2lOOW9DQnBncUtqUmVobFVHd0xia3RyZHFrT3BXbUVScmExdG9lWSIsInNjb3BlcyI6WyJjbG91ZDp2aWV3IiwiY2xvdWQ6bWFuYWdlIiwicHJvdmlkZXItb3JnOnZpZXciLCJwcm92aWRlci1vcmc6bWFuYWdlIiwib3JnOnZpZXciLCJvcmc6bWFuYWdlIiwiZHJhZnRzOnZpZXciLCJkcmFmdHM6ZWRpdCIsImNoaWxkOnZpZXciLCJjaGlsZDpjcmVhdGUiLCJjaGlsZDptYW5hZ2UiLCJwcm9kdWN0OnZpZXciLCJwcm9kdWN0OnN0YWdlIiwicHJvZHVjdDptYW5hZ2UiLCJhcHByb3ZhbDp2aWV3IiwiYXBwcm92YWw6bWFuYWdlIiwiYXBpLWFuYWx5dGljczp2aWV3IiwiYXBpLWFuYWx5dGljczptYW5hZ2UiLCJjb25zdW1lci1vcmc6dmlldyIsImNvbnN1bWVyLW9yZzptYW5hZ2UiLCJhcHA6dmlldzphbGwiLCJhcHA6bWFuYWdlOmFsbCIsIm15OnZpZXciLCJteTptYW5hZ2UiLCJ3ZWJob29rOnZpZXciXX0.657sXpbk1FwKdYrjPC_zfo5NrhGqTGuYHL2AJ8XAYyw
PROVIDER_IDP=provider/default-idp-2
PROVIDER_USERNAME=steve1
PROVIDER_PASSWORD=8iron-hide
PROVIDER_EMAIL=steve1@apic.com
PROVIDER_FIRSTNAME=Steve1
PROVIDER_LASTNAME=Owner


curl -X POST https://$MANAGEMENT/api/user-registries/admin/$PROVIDER_USER_REGISTRY/users -s -k \
     -H "Content-Type:application/json" \
     -H "Accept:application/json" \
     -H "Authorization:Bearer $ADMIN_TOKEN" \
     -d "{ \"username\": \"$PROVIDER_USERNAME\",
           \"password\": \"$PROVIDER_PASSWORD\",
           \"email\": \"$PROVIDER_EMAIL\",
           \"first_name\": \"$PROVIDER_FIRSTNAME\",
           \"last_name\": \"$PROVIDER_LASTNAME\" }"
